<div class="background"></div>

<div class="wrapper">
    <form [formGroup]="currentTab === 'login' ? loginForm : registerForm"
        (ngSubmit)="currentTab === 'login' ? Login() : Register()" class="form">
        <h2 class="text-center">{{currentTab === 'login' ? 'Đăng nhập' : 'Đăng ký'}}</h2>

        <input type="radio" id="tab1" name="tab1" value="login" [checked]="currentTab === 'login'"
            (click)="toggleForm('login')">
        <label for="tab1">Đăng nhập</label>

        <input type="radio" id="tab2" name="tab2" value="register" [checked]="currentTab === 'register'"
            (click)="toggleForm('register')">
        <label for="tab2">Đăng ký</label>

        <div class="form-group">
            <input *ngIf="currentTab === 'login'" type="text" formControlName="username" id="username"
                class="form-control" placeholder='Tài khoản'
                [class.invalid]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched">
            <input *ngIf="currentTab === 'register'" type="text" formControlName="username" id="username"
                class="form-control" placeholder='Tài khoản'
                [class.invalid]="registerForm.get('username')?.invalid && registerForm.get('username')?.touched">
        </div>

        <div class="form-group">
            <input *ngIf="currentTab === 'login'" type="password" formControlName="password" id="password"
                class="form-control" placeholder="Mật khẩu"
                [class.invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
            <input *ngIf="currentTab === 'register'" type="password" formControlName="password" id="password"
                class="form-control" placeholder="Mật khẩu"
                [class.invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        </div>

        <div *ngIf="currentTab === 'register'" class="form-group">
            <input type="password" formControlName="repeatPassword" id="repeat-password" class="form-control"
                placeholder="Nhập lại mật khẩu"
                [class.invalid]="registerForm.get('repeatPassword')?.invalid && registerForm.get('repeatPassword')?.touched">
        </div>

        <div *ngIf="currentTab === 'register'" class="form-group">
            <input type="text" formControlName="gmail" id="gmail" class="form-control" placeholder="Gmail"
                [class.invalid]="registerForm.get('gmail')?.invalid && registerForm.get('gmail')?.touched">
        </div>

        <button type="submit"
            [disabled]="currentTab === 'login' ? !loginForm.valid : !registerForm.valid || !usernameValid || !passwordValid || (currentTab === 'register' && !repeatPasswordValid) || (currentTab === 'register' && !gmailValid)"
            class="btn btn-primary btn-block">
            <span *ngIf="currentTab === 'login'">
                <i class="fa fa-sign-in"></i> Đăng nhập
            </span>
            <span *ngIf="currentTab === 'register'"> <i class="fa fa-user-plus"></i>
                Đăng ký</span>
        </button>
    </form>
</div>